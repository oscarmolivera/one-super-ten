<div class="p-4">
  <h5 class="mb-4">Normas y Reglamentos del Torneo</h5>

  <% if @season_team.regulation_files.attached? %>
    <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
      <% @season_team.regulation_files.each do |file| %>
        <div class="col">
          <div class="card shadow-sm border-0 vh-20">
            <% if file.content_type.starts_with?('image/') %>
              <%= image_tag file.variant(resize_to_limit: [300, 300]), class: "card-img-top", alt: "Reglamento" %>
            <% else %>
              <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                <i class="fas fa-file-pdf fa-4x text-danger mb-3"></i>
                <p class="mb-2"><%= file.filename.to_s %></p>
                <%= link_to "Ver documento", url_for(file), class: "btn btn-outline-primary btn-sm", target: "_blank", rel: "noopener" %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info">Aún no se han subido archivos de normas o reglamentos.</div>
  <% end %>

  <hr class="my-4">

  <h6 class="mb-3">Subir Nuevo Documento</h6>
  <%= form_with model: @season_team, url: upload_regulations_season_team_path(@season_team), method: :patch, html: { multipart: true }, local: true do |f| %>
    <div class="mb-3">
      <%= f.label :regulation_files, "Seleccionar archivos (PDF o imágenes)", class: "form-label" %>
      <%= f.file_field :regulation_files, multiple: true, direct_upload: true, class: "form-control", accept: "image/*,application/pdf" %>
    </div>
    <%= f.submit "Subir Documentos", class: "btn btn-success" %>
  <% end %>
</div>